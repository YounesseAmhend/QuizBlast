{"ast":null,"code":"import _toConsumableArray from\"C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useRef}from\"react\";export function useAuth(){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),is_authenticated=_useState2[0],setAuthentication=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var isAuthenticateds=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/auth\",{method:\"GET\"}).then(function(response){return response.json();}).then(function(result){console.log(result);setAuthentication(result.is_authenticated);setLoaded(true);}).catch(function(Error){return setError(Error);});case 2:case\"end\":return _context.stop();}},_callee);}));return function isAuthenticateds(){return _ref.apply(this,arguments);};}();isAuthenticateds();},[]);return{is_authenticated:is_authenticated,loaded:loaded,error:error};}export function useFetch(link,init){var method=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'GET';var request=arguments.length>3?arguments[3]:undefined;var _useState7=useState(init),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loaded=_useState10[0],setLoaded=_useState10[1];var hasMore=useRef(true);var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var fetchMore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(request){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(request);_context2.next=3;return fetch(\"http://127.0.0.1:8000\"+link,{method:method,body:JSON.stringify(request)}).then(function(response){return response.json();}).then(function(result){if(!result.error){console.log(data);setData(function(old){return[].concat(_toConsumableArray(old),_toConsumableArray(result));});setLoaded(true);}else{setError(result.error);hasMore.current=false;console.log(\"Enough\");}}).catch(function(err){return setError(err);});case 3:case\"end\":return _context2.stop();}},_callee2);}));return function fetchMore(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){if(method==='GET'){var fetchdata=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://127.0.0.1:8000\"+link).then(function(response){console.log(response);return response.json();}).then(function(result){setData(result);setLoaded(true);}).catch(function(err){return setError(err);});case 2:case\"end\":return _context3.stop();}},_callee3);}));return function fetchdata(){return _ref3.apply(this,arguments);};}();fetchdata();}},[]);return{data:data,loaded:loaded,error:error,hasMore:hasMore,fetchMore:fetchMore};}","map":{"version":3,"names":["useState","useEffect","useRef","useAuth","_useState","undefined","_useState2","_slicedToArray","is_authenticated","setAuthentication","_useState3","_useState4","loaded","setLoaded","_useState5","_useState6","error","setError","isAuthenticateds","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","fetch","method","then","response","json","result","console","log","catch","Error","stop","apply","arguments","useFetch","link","init","length","request","_useState7","_useState8","data","setData","_useState9","_useState10","hasMore","_useState11","_useState12","fetchMore","_ref2","_callee2","_callee2$","_context2","body","JSON","stringify","old","concat","_toConsumableArray","current","err","_x","fetchdata","_ref3","_callee3","_callee3$","_context3"],"sources":["C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/src/components/ts/hooks.ts"],"sourcesContent":["import {useState, useEffect, useRef, useCallback } from \"react\"\r\n\r\ntype method = 'GET' | 'POST' | 'DELETE' | 'PUT' | 'PATCH'\r\n\r\nexport function useAuth(){\r\n\r\n    const [is_authenticated, setAuthentication] = useState<boolean | undefined>(undefined)\r\n    const [loaded, setLoaded] = useState(false)\r\n    const [error, setError] = useState(undefined)\r\n\r\n    useEffect(()=>{\r\n        \r\n            const isAuthenticateds = async () => {\r\n\r\n                await fetch(\"/auth\",{\r\n                    method: \"GET\",\r\n                    })\r\n\r\n                    .then((response) => response.json())\r\n\r\n                    .then((result) => {\r\n                        console.log(result)\r\n                        setAuthentication(result.is_authenticated)\r\n                        setLoaded(true)\r\n                    })\r\n\r\n                    .catch((Error)=>setError(Error))\r\n\r\n            }\r\n\r\n            isAuthenticateds()\r\n\r\n        }\r\n    ,[])\r\n\r\n    return {is_authenticated, loaded, error}\r\n}\r\n\r\nexport function useFetch<T>(link: string, init?: T, method: method = 'GET', request?: any){\r\n\r\n    const [data, setData] = useState<T | undefined | any>(init)\r\n\r\n    const [loaded, setLoaded] = useState(false)\r\n\r\n    const hasMore = useRef(true)\r\n\r\n    const [error, setError] = useState<string | undefined>()\r\n\r\n    const fetchMore = async (request: any) =>{\r\n            console.log(request)\r\n            await fetch(\"http://127.0.0.1:8000\" + link, {\r\n                method: method,\r\n                body: JSON.stringify(request),\r\n            })\r\n\r\n            .then(response =>{\r\n                return response.json()\r\n            })\r\n\r\n            .then((result)=>{\r\n\r\n                if(!result.error){\r\n\r\n                    console.log(data)\r\n\r\n                    setData((old:any)=>[...old,...result])\r\n                    \r\n                    setLoaded(true)\r\n                }\r\n                else{\r\n\r\n                    setError(result.error);\r\n\r\n                    hasMore.current = false;\r\n\r\n                    console.log(\"Enough\");\r\n                }\r\n            })\r\n            .catch(err=>setError(err))\r\n        }\r\n    useEffect(()=>{\r\n\r\n        if(method === 'GET'){\r\n\r\n            const fetchdata = async () => {\r\n                await fetch(\"http://127.0.0.1:8000\"+link)\r\n                .then(response =>{\r\n                    console.log(response)\r\n                    return response.json()\r\n                })\r\n                .then((result)=>{\r\n                    setData(result)\r\n                    setLoaded(true)\r\n                })\r\n                .catch(err=>setError(err))\r\n            }   \r\n\r\n            fetchdata()\r\n    }\r\n    },[])\r\n    \r\n    return {data, loaded, error, hasMore, fetchMore}\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}