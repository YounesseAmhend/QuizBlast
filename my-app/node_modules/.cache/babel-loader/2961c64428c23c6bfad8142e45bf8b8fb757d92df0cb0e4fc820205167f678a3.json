{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nexport function useAuth() {\n  _s();\n  const [is_authenticated, setAuthentication] = useState(undefined);\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(undefined);\n  useEffect(() => {\n    const isAuthenticateds = async () => {\n      await fetch(\"/auth\", {\n        method: \"GET\"\n      }).then(response => response.json()).then(result => {\n        console.log(result);\n        setAuthentication(result.is_authenticated);\n        setLoaded(true);\n      }).catch(Error => setError(Error));\n    };\n    isAuthenticateds();\n  }, []);\n  return {\n    is_authenticated,\n    loaded,\n    error\n  };\n}\n_s(useAuth, \"AIrO7UsjOKaX0P6riink8D5cvg4=\");\nexport function useFetch(link, init) {\n  _s2();\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const {\n    method = 'GET',\n    body\n  } = options;\n  const offset = useRef(0);\n  const [data, setData] = useState(init);\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState();\n  const getResult = useCallback(async () => {\n    const response = await fetch(`http://127.0.0.1:8000${link}`, {\n      method,\n      body: body ? JSON.stringify(body) : undefined\n    });\n    if (response.ok) {\n      const result = await response.json();\n      setData(result);\n      setLoaded(true);\n    } else {\n      setError(response.statusText);\n    }\n  }, [link, method, body]);\n  const fetchAgain = useCallback(() => {\n    setLoaded(false);\n    offset.current += 20;\n    getResult().then(result => setData(data => [...(data || []), ...result])).catch(err => setError(err));\n  }, [getResult]);\n  useEffect(() => {\n    getResult().catch(err => setError(err));\n  }, [getResult]);\n  return {\n    data,\n    loaded,\n    error,\n    fetchAgain\n  };\n}\n_s2(useFetch, \"IV8w92U43SDOU9rw1zvvdaaPGJg=\");","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","useAuth","_s","is_authenticated","setAuthentication","undefined","loaded","setLoaded","error","setError","isAuthenticateds","fetch","method","then","response","json","result","console","log","catch","Error","useFetch","link","init","_s2","options","arguments","length","body","offset","data","setData","getResult","JSON","stringify","ok","statusText","fetchAgain","current","err"],"sources":["C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/src/components/ts/hooks.ts"],"sourcesContent":["import {useState, useEffect, useRef, useCallback } from \"react\"\r\n\r\n\r\n\r\nexport function useAuth(){\r\n    const [is_authenticated, setAuthentication] = useState<boolean | undefined>(undefined)\r\n    const [loaded, setLoaded] = useState(false)\r\n    const [error, setError] = useState(undefined)\r\n    useEffect(()=>{\r\n            const isAuthenticateds = async () => {\r\n                await fetch(\"/auth\",{\r\n                    method: \"GET\",\r\n                    })\r\n                    .then((response) => response.json())\r\n                    .then((result) => {\r\n                        console.log(result)\r\n                        setAuthentication(result.is_authenticated)\r\n                        setLoaded(true)\r\n                    })\r\n                    .catch((Error)=>setError(Error))\r\n            }\r\n            isAuthenticateds()\r\n        }\r\n    ,[])\r\n    return {is_authenticated, loaded, error}\r\n}\r\ntype Method = 'GET' | 'POST' | 'DELETE' | 'PUT' | 'PATCH'\r\n\r\n\r\ninterface FetchResult<T> {\r\n  data?: T\r\n  loaded: boolean\r\n  error?: any\r\n  fetchAgain: () => void\r\n}\r\n\r\ninterface FetchOptions {\r\n  method?: Method\r\n  body?: BodyInit\r\n}\r\n\r\nexport function useFetch<T>(link: string, init?: T, options: FetchOptions = {}): FetchResult<T> {\r\n  const { method = 'GET', body } = options\r\n\r\n  const offset = useRef<number>(0)\r\n  const [data, setData] = useState<T | undefined>(init)\r\n  const [loaded, setLoaded] = useState(false)\r\n  const [error, setError] = useState<any>()\r\n\r\n  const getResult = useCallback(async () => {\r\n    const response = await fetch(`http://127.0.0.1:8000${link}`, {\r\n      method,\r\n      body: body ? JSON.stringify(body) : undefined,\r\n    })\r\n\r\n    if (response.ok) {\r\n      const result = await response.json()\r\n      setData(result)\r\n      setLoaded(true)\r\n    } else {\r\n      setError(response.statusText)\r\n    }\r\n  }, [link, method, body])\r\n\r\n  const fetchAgain = useCallback(() => {\r\n    setLoaded(false)\r\n    offset.current += 20\r\n    getResult()\r\n      .then(result => setData((data: T[] | undefined) => [...(data || []), ...result]))\r\n      .catch(err => setError(err))\r\n  }, [getResult])\r\n\r\n  useEffect(() => {\r\n    getResult()\r\n      .catch(err => setError(err))\r\n  }, [getResult])\r\n\r\n  return { data, loaded, error, fetchAgain }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}