{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\youne\\\\Desktop\\\\Brograming\\\\WEB\\\\Learning\\\\FinalProject\\\\quizblast\\\\my-app\\\\src\\\\components\\\\QuizView\\\\Quizview.tsx\",\n  _s = $RefreshSig$();\nimport { lazy, Suspense, useEffect, useRef, useState } from \"react\";\nimport { useFetch } from \"../ts/hooks\";\nimport Loading from \"../ts/components/loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Quiz = /*#__PURE__*/lazy(_c = () => import(\"./Quiz\"));\n_c2 = Quiz;\nexport default function Home(props) {\n  _s();\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const {\n    data: quizs,\n    loaded,\n    fetchAgain: fetchMore\n  } = useFetch(\"/quiz\", [], {\n    page\n  });\n  const observer = useRef(null);\n  const lastElementRef = useRef(null);\n  const handleIntersection = entries => {\n    if (entries[0].isIntersecting && hasMore) {\n      setPage(prevPage => prevPage + 1);\n    }\n  };\n  useEffect(() => {\n    var _observer$current;\n    (_observer$current = observer.current) === null || _observer$current === void 0 ? void 0 : _observer$current.disconnect();\n    observer.current = new IntersectionObserver(handleIntersection, {\n      rootMargin: \"0px\",\n      threshold: 1\n    });\n    if (lastElementRef.current) {\n      observer.current.observe(lastElementRef.current);\n    }\n    return () => {\n      var _observer$current2;\n      (_observer$current2 = observer.current) === null || _observer$current2 === void 0 ? void 0 : _observer$current2.disconnect();\n    };\n  }, [hasMore]);\n  useEffect(() => {\n    fetchMore();\n  }, [fetchMore, page]);\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: /*#__PURE__*/_jsxDEV(Loading, {\n      loaded: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 25\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onScrollCapture: () => {},\n      className: \"quiz-container\",\n      children: quizs === null || quizs === void 0 ? void 0 : quizs.map(function (quiz, index) {\n        if (index === quizs.length - 1) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: lastElementRef,\n            children: /*#__PURE__*/_jsxDEV(Quiz, {\n              goView: props.goView,\n              setId: props.setId,\n              id: quiz.id,\n              username: quiz.username,\n              name: quiz.name\n            }, quiz.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this)\n          }, quiz.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(Quiz, {\n            goView: props.goView,\n            setId: props.setId,\n            id: quiz.id,\n            username: quiz.username,\n            name: quiz.name\n          }, quiz.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this);\n        }\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Loading, {\n      loaded: loaded\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"IwSXOz1zMlLbUFUzECv6RamHJQ0=\", false, function () {\n  return [useFetch];\n});\n_c3 = Home;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Quiz$lazy\");\n$RefreshReg$(_c2, \"Quiz\");\n$RefreshReg$(_c3, \"Home\");","map":{"version":3,"names":["lazy","Suspense","useEffect","useRef","useState","useFetch","Loading","jsxDEV","_jsxDEV","Quiz","_c","_c2","Home","props","_s","page","setPage","hasMore","setHasMore","data","quizs","loaded","fetchAgain","fetchMore","observer","lastElementRef","handleIntersection","entries","isIntersecting","prevPage","_observer$current","current","disconnect","IntersectionObserver","rootMargin","threshold","observe","_observer$current2","fallback","fileName","_jsxFileName","lineNumber","columnNumber","children","onScrollCapture","className","map","quiz","index","length","ref","goView","setId","id","username","name","_c3","$RefreshReg$"],"sources":["C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/src/components/QuizView/Quizview.tsx"],"sourcesContent":["import { lazy, Suspense, useEffect, useRef, useState } from \"react\";\r\nimport { useFetch } from \"../ts/hooks\";\r\nimport Loading from \"../ts/components/loading\";\r\n\r\ninterface Props {\r\n  goView(): void;\r\n  setId(par: number): void;\r\n}\r\n\r\ninterface Quiz {\r\n  id: number;\r\n  username: string;\r\n  name: string;\r\n}\r\n\r\nconst Quiz = lazy(() => import(\"./Quiz\"));\r\n\r\nexport default function Home(props: Props) {\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const { data: quizs, loaded, fetchAgain: fetchMore } = useFetch<Quiz[]>(\"/quiz\", [], { page });\r\n\r\n  const observer = useRef<IntersectionObserver | null>(null);\r\n  const lastElementRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleIntersection = (entries: IntersectionObserverEntry[]) => {\r\n    if (entries[0].isIntersecting && hasMore) {\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    observer.current?.disconnect();\r\n\r\n    observer.current = new IntersectionObserver(handleIntersection, {\r\n      rootMargin: \"0px\",\r\n      threshold: 1,\r\n    });\r\n\r\n    if (lastElementRef.current) {\r\n      observer.current.observe(lastElementRef.current);\r\n    }\r\n\r\n    return () => {\r\n      observer.current?.disconnect();\r\n    };\r\n  }, [hasMore]);\r\n\r\n  useEffect(() => {\r\n    fetchMore();\r\n  }, [fetchMore, page]);\r\n\r\n  return (\r\n    <Suspense fallback={<Loading loaded={false} />}>\r\n      <div onScrollCapture={() => {}} className=\"quiz-container\">\r\n        {quizs?.map(function (quiz: Quiz, index: number) {\r\n          if (index === quizs.length - 1) {\r\n            return (\r\n              <div ref={lastElementRef} key={quiz.id}>\r\n                <Quiz goView={props.goView} setId={props.setId} key={quiz.id} id={quiz.id} username={quiz.username} name={quiz.name} />\r\n              </div>\r\n            );\r\n          } else {\r\n            return (\r\n              <Quiz goView={props.goView} setId={props.setId} key={quiz.id} id={quiz.id} username={quiz.username} name={quiz.name} />\r\n            );\r\n          }\r\n        })}\r\n      </div>\r\n      <Loading loaded={loaded} />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}