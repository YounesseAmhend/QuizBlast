{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{lazy,Suspense,useRef}from\"react\";import InfiniteScroll from'react-infinite-scroller';import{useFetch}from\"../ts/hooks\";import Loading from\"../ts/components/loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Quiz=/*#__PURE__*/lazy(function(){return import(\"./Quiz\");});export default function Home(props){var pageCount=useRef(0);var _useFetch=useFetch(\"/quiz\",[],\"POST\"),quizs=_useFetch.data,loaded=_useFetch.loaded,fetchMore=_useFetch.fetchMore,error=_useFetch.error,hasMore=_useFetch.hasMore;var oldData=useRef();// todo react infinite scroll\nvar getMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:pageCount.current++;_context.next=3;return fetchMore({\"page_number\":pageCount.current});case 3:console.log(\"done\");// updating the page counter\nconsole.log(pageCount.current);case 5:case\"end\":return _context.stop();}},_callee);}));return function getMore(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Suspense,{fallback:/*#__PURE__*/_jsx(Loading,{loaded:false}),children:[/*#__PURE__*/_jsx(Loading,{loaded:loaded}),/*#__PURE__*/_jsx(InfiniteScroll,{loadMore:getMore,hasMore:hasMore.current,loader:/*#__PURE__*/_jsx(Loading,{loaded:true}),children:/*#__PURE__*/_jsx(\"div\",{onScrollCapture:function onScrollCapture(){},className:\"quiz-container\",children:quizs===null||quizs===void 0?void 0:quizs.map(function(quiz){return/*#__PURE__*/_jsx(Quiz,{goView:props.goView,setId:props.setId,id:quiz.id,username:quiz.username,name:quiz.name},quiz.id);})})})]});}","map":{"version":3,"names":["lazy","Suspense","useRef","InfiniteScroll","useFetch","Loading","jsx","_jsx","jsxs","_jsxs","Quiz","Home","props","pageCount","_useFetch","quizs","data","loaded","fetchMore","error","hasMore","oldData","getMore","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","current","console","log","stop","apply","arguments","fallback","children","loadMore","loader","onScrollCapture","className","map","quiz","goView","setId","id","username","name"],"sources":["C:/Users/youne/Desktop/Brograming/WEB/Learning/FinalProject/quizblast/my-app/src/components/QuizView/Quizview.tsx"],"sourcesContent":["import { lazy, Suspense, useEffect, useRef, useState } from \"react\";\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport { useFetch } from \"../ts/hooks\";\r\nimport Loading from \"../ts/components/loading\";\r\n\r\ninterface Props {\r\n    goView(): void,\r\n    setId(par: number): void, \r\n}\r\n\r\ninterface Quiz {\r\n    id: number;\r\n    username: string;\r\n    name: string;\r\n}\r\n\r\nconst Quiz = lazy(() => import(\"./Quiz\"));\r\n\r\nexport default function Home(props: Props) {\r\n    const pageCount = useRef(0)\r\n    const { data: quizs, loaded, fetchMore, error ,hasMore} = useFetch<Quiz[]>(\"/quiz\", [], \"POST\");\r\n    const oldData = useRef()\r\n\r\n    // todo react infinite scroll\r\n    const getMore = async () => {\r\n            pageCount.current++;\r\n            await fetchMore({\"page_number\":pageCount.current})\r\n            \r\n            console.log(\"done\")\r\n\r\n            // updating the page counter\r\n\r\n            \r\n\r\n            console.log(pageCount.current)\r\n\r\n    }\r\n\r\n    return (\r\n        <Suspense fallback={<Loading loaded={false} />}>\r\n            <Loading loaded={loaded}/>\r\n            <InfiniteScroll\r\n                loadMore={getMore}\r\n                hasMore={hasMore.current}\r\n                loader={<Loading loaded={true} />}\r\n            >\r\n                <div onScrollCapture={() => {}} className=\"quiz-container\">\r\n                    {quizs?.map(function (quiz: Quiz) {\r\n                        return (\r\n                            <Quiz\r\n                                goView={props.goView}\r\n                                setId={props.setId}\r\n                                key={quiz.id}\r\n                                id={quiz.id}\r\n                                username={quiz.username}\r\n                                name={quiz.name}\r\n                            />\r\n                        );\r\n                    })}\r\n                </div>\r\n            </InfiniteScroll>\r\n        </Suspense>\r\n    );\r\n}\r\n"],"mappings":"oVAAA,OAASA,IAAI,CAAEC,QAAQ,CAAaC,MAAM,KAAkB,OAAO,CACnE,MAAO,CAAAC,cAAc,KAAM,yBAAyB,CACpD,OAASC,QAAQ,KAAQ,aAAa,CACtC,MAAO,CAAAC,OAAO,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAa/C,GAAM,CAAAC,IAAI,cAAGV,IAAI,CAAC,iBAAM,OAAM,CAAC,QAAQ,CAAC,GAAC,CAEzC,cAAe,SAAS,CAAAW,IAAIA,CAACC,KAAY,CAAE,CACvC,GAAM,CAAAC,SAAS,CAAGX,MAAM,CAAC,CAAC,CAAC,CAC3B,IAAAY,SAAA,CAA0DV,QAAQ,CAAS,OAAO,CAAE,EAAE,CAAE,MAAM,CAAC,CAAjFW,KAAK,CAAAD,SAAA,CAAXE,IAAI,CAASC,MAAM,CAAAH,SAAA,CAANG,MAAM,CAAEC,SAAS,CAAAJ,SAAA,CAATI,SAAS,CAAEC,KAAK,CAAAL,SAAA,CAALK,KAAK,CAAEC,OAAO,CAAAN,SAAA,CAAPM,OAAO,CACtD,GAAM,CAAAC,OAAO,CAAGnB,MAAM,EAAE,CAExB;AACA,GAAM,CAAAoB,OAAO,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,SAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACRnB,SAAS,CAACoB,OAAO,EAAE,CAACH,QAAA,CAAAE,IAAA,SACd,CAAAd,SAAS,CAAC,CAAC,aAAa,CAACL,SAAS,CAACoB,OAAO,CAAC,CAAC,QAElDC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC,CAEnB;AAIAD,OAAO,CAACC,GAAG,CAACtB,SAAS,CAACoB,OAAO,CAAC,yBAAAH,QAAA,CAAAM,IAAA,MAAAT,OAAA,GAErC,kBAZK,CAAAL,OAAOA,CAAA,SAAAC,IAAA,CAAAc,KAAA,MAAAC,SAAA,OAYZ,CAED,mBACI7B,KAAA,CAACR,QAAQ,EAACsC,QAAQ,cAAEhC,IAAA,CAACF,OAAO,EAACY,MAAM,CAAE,KAAM,EAAI,CAAAuB,QAAA,eAC3CjC,IAAA,CAACF,OAAO,EAACY,MAAM,CAAEA,MAAO,EAAE,cAC1BV,IAAA,CAACJ,cAAc,EACXsC,QAAQ,CAAEnB,OAAQ,CAClBF,OAAO,CAAEA,OAAO,CAACa,OAAQ,CACzBS,MAAM,cAAEnC,IAAA,CAACF,OAAO,EAACY,MAAM,CAAE,IAAK,EAAI,CAAAuB,QAAA,cAElCjC,IAAA,QAAKoC,eAAe,CAAE,SAAAA,gBAAA,CAAM,CAAC,CAAE,CAACC,SAAS,CAAC,gBAAgB,CAAAJ,QAAA,CACrDzB,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAE8B,GAAG,CAAC,SAAUC,IAAU,CAAE,CAC9B,mBACIvC,IAAA,CAACG,IAAI,EACDqC,MAAM,CAAEnC,KAAK,CAACmC,MAAO,CACrBC,KAAK,CAAEpC,KAAK,CAACoC,KAAM,CAEnBC,EAAE,CAAEH,IAAI,CAACG,EAAG,CACZC,QAAQ,CAAEJ,IAAI,CAACI,QAAS,CACxBC,IAAI,CAAEL,IAAI,CAACK,IAAK,EAHXL,IAAI,CAACG,EAAE,CAId,CAEV,CAAC,CAAC,EACA,EACO,GACV,CAEnB"},"metadata":{},"sourceType":"module","externalDependencies":[]}